<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Chat</title>
<script type="text/javascript">
function send() {
  window.parent.postMessage(document.getElementById("postField").value, "*");
}

function update(ev) {
  var message = ev.data;
    document.getElementById("prevchat").innerHTML += message;
}

function initialize() {
  if (!window.addEventListener) {
    window.attachEvent("onmessage", update, false);
  }
  else {
    window.addEventListener("onmessage", update, false);
    window.addEventListener("message", update, false);
  }
}

</script>
</head>

<body onload="initialize()">
<div id="prevchat" style="width:100%;height:70px;"></div>
<a>Chat:</a><input type="text" id="postField" />
<button onclick="send()">Send</button>

</body>

</html>
